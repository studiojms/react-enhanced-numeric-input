{"version":3,"sources":["webpack:///../src/NumericInput.tsx","webpack:///../docs/Docs.mdx","webpack:///../node_modules/classnames/index.js"],"names":["NumericInput","props","inputRef","React","state","formattedValue","value","onChange","bind","onBlur","componentDidMount","this","setState","formatWithZeroes","replace","decimalSeparator","decimalPrecision","componentDidUpdate","prevProps","render","decimalPattern","className","classnames","percent","money","data-percent","data-money","moneyMask","disabled","autoFocus","name","style","maxLength","pattern","type","id","ref","placeholder","onFocus","onKeyPress","e","decimalNotationLength","length","calculatedMaxLength","target","val","decimalPlaces","substr","String","missingPlaces","paddingZeroes","separator","separatorPosition","indexOf","hasSeparator","i","partialFormattedValue","split","getReturnValue","baseValue","stringValueOnBlur","parseFloat","valor","defaultOptions","setDefaultMoneyMask","setDefaultPercent","setDefaultDecimalSeparator","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","of","__position","__code","__scope","Playground","Props","isMDXComponent","hasOwn","hasOwnProperty","classNames","classes","arguments","arg","argType","push","Array","isArray","inner","apply","key","call","join","module","exports"],"mappings":"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","file":"component---docs-docs-mdx-7e0b6bd9d7853844649c.js","sourcesContent":["import * as classnames from \"classnames\";\nimport * as React from \"react\";\n\nimport \"./assets/styles.css\";\n\ninterface INumericInputProps {\n  className?: string;\n  decimalPrecision?: number;\n  decimalSeparator?: string;\n  disabled?: boolean;\n  autoFocus?: boolean;\n  maxLength?: number;\n  id?: string;\n  name?: string;\n  placeholder?: string;\n  onChange?: (e: React.ChangeEvent) => void;\n  onBlur?: (e: React.ChangeEvent, value: any) => void;\n  onClick?: () => void;\n  onFocus?: () => void;\n  onKeyPress?: () => void;\n  style?: Record<string, any>;\n  value?: string | number;\n  percent?: boolean;\n  money?: boolean;\n  moneyMask?: string;\n  stringValueOnBlur?: boolean;\n}\n\ninterface INumericInputState {\n  formattedValue: string;\n  value: string | number;\n}\n\n/**\n * Input que aceita apenas valores numéricos.\n *\n * Para recuperar o valor no tipo number, ao ser executado o método onBlur são passados dois parâmetros, event e value.\n * O parâmetro value é o valor numérico, podendo ser enviado texto de acordo com o valor do parâmetro stringValueOnBlur\n *\n * @param money {boolean} indica que o componente é do tipo monetário, exibindo um ícone com o símbolo monetário ao lado do input\n * @param percent {boolean} indica que o componente é do tipo percentual, exibindo um ícone com o símbolo porcento ao lado do input\n * @param stringValueOnBlur {boolean} indica que ao ser executado o método onBlur, o argumento value enviado seja do tipo string.\n */\nclass NumericInput extends React.Component<INumericInputProps, INumericInputState> {\n  private inputRef = React.createRef<HTMLInputElement>();\n\n  constructor(props: INumericInputProps) {\n    super(props);\n    this.state = {\n      formattedValue: \"\",\n      value: null,\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n  }\n\n  private get decimalSeparator(): string {\n    return this.props.decimalSeparator || defaultOptions.decimalSeparator;\n  }\n\n  private get moneyMask(): string {\n    return this.props.moneyMask || defaultOptions.moneyMask;\n  }\n\n  private get percent(): string {\n    return defaultOptions.percent;\n  }\n\n  private get maxLength(): number {\n    return this.props.maxLength || 20;\n  }\n\n  public componentDidMount() {\n    this.setState({\n      formattedValue: this.formatWithZeroes(\n        `${this.props.value != null ? this.props.value : \"\"}`.replace(/\\./g, this.decimalSeparator),\n        this.props.decimalPrecision\n      ),\n      value: this.props.value,\n    });\n  }\n\n  public componentDidUpdate(prevProps: INumericInputProps) {\n    const { value } = this.props;\n\n    if (value !== prevProps.value && this.state.formattedValue !== value) {\n      this.setState({\n        formattedValue: this.formatWithZeroes(\n          `${value != null ? value : \"\"}`.replace(/\\./g, this.decimalSeparator),\n          this.props.decimalPrecision\n        ),\n        value,\n      });\n    }\n  }\n\n  public render() {\n    const { props } = this;\n\n    const numericPattern = \"^[-]?[0-9]*\";\n    const decimalPattern = `^[-]?[0-9]*(${this.decimalSeparator}{1}[0-9]*)?`;\n\n    return (\n      <div\n        className={classnames(\"ni-numeric-input\", { percent: props.percent, money: props.money })}\n        data-percent={props.percent ? this.percent : \"\"}\n        data-money={props.money ? this.moneyMask : \"\"}\n      >\n        <input\n          className={classnames(\"ni-text-right\", props.className)}\n          disabled={props.disabled}\n          autoFocus={props.autoFocus}\n          name={props.name}\n          style={this.props.style}\n          maxLength={this.maxLength}\n          pattern={props.decimalPrecision > 0 ? decimalPattern : numericPattern}\n          type=\"text\"\n          id={props.id}\n          ref={this.inputRef}\n          value={this.state.formattedValue != null ? this.state.formattedValue : \"\"}\n          placeholder={props.placeholder}\n          onChange={this.onChange}\n          onBlur={this.onBlur}\n          onFocus={this.props.onFocus}\n          onKeyPress={this.props.onKeyPress}\n        />\n      </div>\n    );\n  }\n\n  private onChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const decimalNotationLength =\n      this.props.decimalPrecision > 0 && this.props.decimalPrecision + this.decimalSeparator.length;\n    const calculatedMaxLength = this.maxLength + decimalNotationLength;\n\n    if (e.target.value.length <= calculatedMaxLength) {\n      const value = e.target.value;\n      this.setState({ formattedValue: value });\n      if (this.props.onChange) {\n        this.props.onChange(e);\n      }\n    }\n  }\n\n  private formatWithZeroes(val: string, decimalPlaces: number): string {\n    let formattedValue = val;\n\n    const decimalNotationLength =\n      this.props.decimalPrecision > 0 && this.props.decimalPrecision + this.decimalSeparator.length;\n    const calculatedMaxLength = this.maxLength + decimalNotationLength;\n\n    if (formattedValue.length > this.maxLength) {\n      formattedValue = formattedValue.substr(0, this.maxLength);\n    }\n\n    if (\n      val !== \"\" &&\n      val !== null &&\n      decimalPlaces !== null &&\n      decimalPlaces > 0 &&\n      val.length <= calculatedMaxLength\n    ) {\n      val = String(val);\n\n      let paddingZeroes = \"\";\n      const separator = this.decimalSeparator;\n      const separatorPosition = val.indexOf(separator);\n      const hasSeparator = separatorPosition > 0;\n      let missingPlaces;\n\n      if (hasSeparator) {\n        missingPlaces = decimalPlaces - val.substr(separatorPosition + 1).length;\n      } else {\n        missingPlaces = decimalPlaces - (separatorPosition + 1);\n      }\n\n      for (let i = 1; i <= missingPlaces; i++) {\n        paddingZeroes += \"0\";\n      }\n\n      const partialFormattedValue = `${val}${hasSeparator ? \"\" : separator}${paddingZeroes}`;\n\n      formattedValue =\n        partialFormattedValue.split(separator)[0] +\n        separator +\n        partialFormattedValue.split(separator)[1].substr(0, decimalPlaces);\n    }\n\n    return formattedValue;\n  }\n\n  private getReturnValue(baseValue: string) {\n    let returnValue = null;\n    if (this.props.stringValueOnBlur) {\n      returnValue = `${baseValue}`;\n    } else {\n      returnValue = baseValue ? parseFloat(baseValue.replace(this.decimalSeparator, \".\")) : null;\n    }\n\n    return returnValue;\n  }\n\n  private onBlur(e: React.ChangeEvent<HTMLInputElement>) {\n    const { decimalPrecision } = this.props;\n    let valor = e.target.value;\n    const formattedValue = this.formatWithZeroes(valor, decimalPrecision);\n\n    if (valor !== \"\" && formattedValue.length <= this.maxLength) {\n      valor = formattedValue;\n\n      if (valor.indexOf(`-0${this.decimalSeparator}`) >= 0) {\n        // remove signal if values is greater than 0\n        valor = valor.substr(1, valor.length);\n      }\n\n      this.setState({ value: this.getReturnValue(valor), formattedValue: valor });\n      e.target.value = valor;\n    }\n\n    if (this.props.onBlur) {\n      this.props.onBlur(e, valor ? parseFloat(valor.replace(this.decimalSeparator, \".\")) : null);\n    }\n  }\n}\n\nconst defaultOptions = {\n  decimalSeparator: \",\",\n  moneyMask: \"$\",\n  percent: \"%\",\n};\n\nexport function setDefaultMoneyMask(moneyMask: string) {\n  defaultOptions.moneyMask = moneyMask;\n}\n\nexport function setDefaultPercent(percent: string) {\n  defaultOptions.percent = percent;\n}\n\nexport function setDefaultDecimalSeparator(decimalSeparator: string) {\n  defaultOptions.decimalSeparator = decimalSeparator;\n}\n\nexport default NumericInput;\n","import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/dados/private/react-enhanced-numeric-input/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nimport { Playground, Props } from \"docz\";\nimport NumericInput from \"../src/NumericInput.tsx\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"numericinput\"\n    }}>{`NumericInput`}</h1>\n    <Props of={NumericInput} mdxType=\"Props\" />\n    <h2 {...{\n      \"id\": \"basic-usage\"\n    }}>{`Basic Usage`}</h2>\n    <Playground __position={1} __code={'<NumericInput />'} __scope={{\n      props,\n      DefaultLayout,\n      Playground,\n      Props,\n      NumericInput\n    }} mdxType=\"Playground\">\n  <NumericInput mdxType=\"NumericInput\" />\n    </Playground>\n    <h2 {...{\n      \"id\": \"defining-decimal-precision\"\n    }}>{`Defining decimal precision`}</h2>\n    <Playground __position={2} __code={'<NumericInput decimalPrecision={2} value={50} />'} __scope={{\n      props,\n      DefaultLayout,\n      Playground,\n      Props,\n      NumericInput\n    }} mdxType=\"Playground\">\n  <NumericInput decimalPrecision={2} value={50} mdxType=\"NumericInput\" />\n    </Playground>\n    <h2 {...{\n      \"id\": \"decimal-precision-and-maxlength\"\n    }}>{`Decimal precision and maxLength`}</h2>\n    <Playground __position={3} __code={'<NumericInput decimalPrecision={2} maxLength={4} value={99999999} />'} __scope={{\n      props,\n      DefaultLayout,\n      Playground,\n      Props,\n      NumericInput\n    }} mdxType=\"Playground\">\n  <NumericInput decimalPrecision={2} maxLength={4} value={99999999} mdxType=\"NumericInput\" />\n    </Playground>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","require(\"core-js/modules/es6.array.is-array\");\n\n/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg) && arg.length) {\n        var inner = classNames.apply(null, arg);\n\n        if (inner) {\n          classes.push(inner);\n        }\n      } else if (argType === 'object') {\n        for (var key in arg) {\n          if (hasOwn.call(arg, key) && arg[key]) {\n            classes.push(key);\n          }\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames[\"default\"] = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();"],"sourceRoot":""}